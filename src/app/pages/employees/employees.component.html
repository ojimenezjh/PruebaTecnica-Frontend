
<div class="content-block flex-box">
    <h2>Empleats</h2>
    <app-create-edit-manager *ngIf="rrhhRole" [employee]="this.employee" ></app-create-edit-manager>
    <app-create-edit-request [employee]="this.employee" [manager]="this.manager"></app-create-edit-request>
</div>

<div class="loading-center" *ngIf="loading">
  <dx-load-indicator width="150px" height="150px" [visible]="true"></dx-load-indicator>
</div>

<dx-data-grid  #employeesGrid *ngIf="!loading" class="dx-card wide-card"
  [keyExpr]="['id']"
  (onRowClick)="onRowClick($event)"
  [dataSource]="dataSource"
  [showBorders]="false"
  [focusedRowEnabled]="true"
  [columnAutoWidth]="true"
  [columnHidingEnabled]="true">

  <dxo-paging [pageSize]="12"></dxo-paging>
  <dxo-pager [showPageSizeSelector]="true" [showInfo]="true"></dxo-pager>
  <dxo-filter-row [visible]="true"></dxo-filter-row>

  <dxi-column
    dataField="id"
    caption="ID"
    [hidingPriority]="10">
  </dxi-column>
  <dxi-column
    dataField="name"
    caption="Nom"
    [hidingPriority]="8">
  </dxi-column>
  <dxi-column
    dataField="surnames"
    caption="Cognoms"
    [hidingPriority]="6">
  </dxi-column>
  <dxi-column
  dataField="email"
  caption="Email"
  dataType="email"
  [hidingPriority]="4">
</dxi-column>
  <dxi-column
    dataField="identity_document"
    caption="DNI"
    [width]="120"
    [hidingPriority]="5">
  </dxi-column>
  <dxi-column
  dataField="phone"
  caption="Telèfon"
  [hidingPriority]="5">
</dxi-column>
  <dxi-column
    dataField="job_title"
    caption="Posició"
    [hidingPriority]="3">
  </dxi-column>
  <dxi-column
    dataField="salary"
    caption="Remuneració"
    [hidingPriority]="5">
  </dxi-column>
  <dxi-column
    dataField="active"
    caption="Actiu"
    [hidingPriority]="3">
  </dxi-column>
  <dxi-column 
    dataField="departments[0].name"
    caption="Departament"
    [hidingPriority]="3">
  </dxi-column>
  <dxi-column
    dataField="hire_date"
    caption="Antiguitat"
    [hidingPriority]="0">
  </dxi-column>
  <dxi-column
    dataField="birth_date"
    caption="Data de naixement"
    dataType="date"
    [hidingPriority]="0">
  </dxi-column>
</dx-data-grid>
